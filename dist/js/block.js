/*! License information can be found in block.js.LICENSE.txt */
!function(){const{registerBlockType:e}=wp.blocks,{useState:t}=wp.element,{__:r,sprintf:a}=wp.i18n,{InspectorControls:l}=wp.blockEditor,{PanelBody:o,ToggleControl:c,TextControl:i,TextareaControl:n,Button:s}=wp.components,{serverSideRender:m}=wp,{dispatch:h}=wp.data,f=function(){return{fill:arguments.length>0&&void 0!==arguments[0]?arguments[0]:"#fff",stroke:"#000",strokeMiterlimit:10,strokeWidth:"10px"}},p=e=>{let{onConvert:a}=e;const[l,o]=t("");return React.createElement(React.Fragment,null,React.createElement(n,{label:r("iframe tag","taro-iframe-block"),value:l,onChange:e=>o(e),help:r("Paste html tag here and convert into options.","taro-iframe-block"),placeholder:'e.g. <iframe src="https://example.com" width="640" height="480" />',rows:4}),React.createElement(s,{onClick:()=>{if(a){const e=(e=>{if(!e.match(/<iframe ([^>]+)\/?>/i))return h("core/notices").createNotice("error",r("Sorry, but failed to parse iframe tag.","taro-iframe-block"),{type:"snackbar"}).then((e=>{setTimeout((()=>{h("core/notices").removeNotice(e.notice.id)}),3e3)})),!1;const t={},a=[];let l=!1;return RegExp.$1.split(" ").forEach((e=>"allowfullscreen"===(e=e.trim())?(t.fullscreen=!0,l=!0,!0):!e.match(/^([^=]+)=['"]([^'"]+)['"]$/i)||(TaroIframeBlockEditor.hasOwnProperty(RegExp.$1)?t[RegExp.$1]=RegExp.$2:a.push(e),void(l=!0)))),a.length&&(t.other=a.join(" ")),!!l&&t})(l);e&&a(e)}},isSecondary:!0},r("Convert","taro-iframe-block")))};e("taro/iframe-block",{title:r("iframe","taro-iframe-block"),icon:React.createElement("svg",{viewBox:"0 0 441 441"},React.createElement("rect",{x:"5",y:"5",width:"431",height:"431",rx:"5",style:f("#e6e6e6")}),React.createElement("circle",{cx:"49",cy:"44",r:"19.5",style:{fill:"#ff5f58"}}),React.createElement("circle",{cx:"109",cy:"44",r:"19.5",style:{fill:"#ffbd2e"}}),React.createElement("circle",{cx:"169",cy:"44",r:"19.5",style:{fill:"#39b54a"}}),React.createElement("path",{d:"M41,119h0Z",transform:"translate(-35.5 -35.5)",style:f("none")}),React.createElement("rect",{x:"59.5",y:"160.5",width:"322",height:"198",style:f()}),React.createElement("polygon",{points:"357.83 173.5 346.86 192.5 368.8 192.5 357.83 173.5"}),React.createElement("polygon",{points:"357.83 348.83 368.8 329.83 346.86 329.83 357.83 348.83"}),React.createElement("line",{x1:"335.5",y1:"160.5",x2:"335.5",y2:"358.5",style:f("none")})),category:"embed",supports:{alignWide:!0,align:["","center","full","wide"],className:!0},example:{src:"https://wordpress.org",width:320,height:180},keywords:["iframe",r("Embed","taro-iframe-block")],attributes:TaroIframeBlockEditor,description:r("Add responsive iframe block which keep original aspect ratio.","taro-iframe-block"),edit(e){let t,{attributes:n,setAttributes:s}=e;if(n.responsive)if(/^\d+$/.test(n.width)&&/^\d+$/.test(n.height)&&0<n.width*n.height){const e=n.height/n.width*100;t=a(r("Current aspect ratio: %s","taro-iframe-bock"),Math.floor(e)+"%")}else t=r("Failed to convert aspect ratio. It will be 16:9(56.25%, default)","taro-iframe-bock");else t=r("iframe will be display in specified width and height.","taro-iframe-bock");return React.createElement(React.Fragment,null,React.createElement(l,null,React.createElement(o,{defaultOpen:!0,title:r("Display Setting","taro-iframe-block")},React.createElement(i,{type:"url",label:r("SRC attribute","taro-iframe-block"),value:n.src,onChange:e=>s({src:e})}),React.createElement(i,{label:r("Width","taro-iframe-block"),value:n.width,onChange:e=>s({width:e})}),React.createElement(i,{label:r("Height","taro-iframe-block"),value:n.height,onChange:e=>s({height:e})}),React.createElement(c,{checked:n.responsive,label:r("Responsive","taro-iframe-block"),onChange:e=>s({responsive:e}),help:t}),React.createElement(c,{checked:n.fullscreen,label:r("Allow Fullscreen","taro-iframe-block"),onChange:e=>s({fullscreen:e})}),React.createElement(i,{label:r("Other Attributes","taro-iframe-block"),placeholder:'e.g. id="frame" name="my-map"',help:r("Add other attribute here.","taro-iframe-block"),value:n.other,onChange:e=>s({other:e})})),React.createElement(o,{defaultOpen:!1,title:r("Converter","taro-iframe-block")},React.createElement(p,{onConvert:e=>s(e)}))),n.src.length?React.createElement(m,{block:"taro/iframe-block",attributes:n}):React.createElement("div",{className:"taro-iframe-block-editor"},React.createElement(p,{onConvert:e=>s(e)})))},save(){return null}})}();